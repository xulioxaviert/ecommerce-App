<div class="card flex justify-center">
  <p-dialog
    header="Producto seleccionado"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '50rem' }"
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  >
    <div class="flex items-start max-sm:flex-col gap-4 py-4">
      <div class="w-32 h-full shrink-0">
        <img
          src="{{ currentProduct.image }}"
          class="w-full aspect-[112/149] object-contain cursor-pointer"
          alt="product image"
        />
      </div>

      <div class="flex items-start gap-4 w-full">
        <div>
          <h3 class="text-base font-bold text-gray-800 mb-1 cursor-pointer">
            {{ currentProduct.title }}
          </h3>

          <div class="space-y-1">
            @for (property of currentProduct.properties; track $index) {
            <h6 class="text-sm text-gray-800">
              Color:
              <strong class="ml-2">{{ property.color | uppercase }}</strong>
            </h6>
            <h6 class="mt-6 flex flex-wrap mr-1">
              @for (size of property.size; track $index){
              <div
                class="flex gap-2 items-center border border-gray-300 bg-white px-3 py-2 w-max mr-2"
              >
                {{ size.size | uppercase }} :
                <button
                  type="button"
                  class="border-none outline-none"
                  (click)="decrementQuantity(currentProduct, size)"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-2.5 h-2.5"
                    viewBox="0 0 121.805 121.804"
                  >
                    <path
                      d="M7.308 68.211h107.188a7.309 7.309 0 0 0 7.309-7.31 7.308 7.308 0 0 0-7.309-7.309H7.308a7.31 7.31 0 0 0 0 14.619z"
                      data-original="#000000"
                    />
                  </svg>
                </button>
                <span class="text-gray-800 text-sm font-semibold px-3">{{
                  size.quantity
                }}</span>
                <button
                  type="button"
                  class="border-none outline-none"
                  (click)="incrementQuantity(currentProduct, size)"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-2.5 h-2.5"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M256 509.892c-19.058 0-34.5-15.442-34.5-34.5V36.608c0-19.058 15.442-34.5 34.5-34.5s34.5 15.442 34.5 34.5v438.784c0 19.058-15.442 34.5-34.5 34.5z"
                      data-original="#000000"
                    />
                    <path
                      d="M475.392 290.5H36.608c-19.058 0-34.5-15.442-34.5-34.5s15.442-34.5 34.5-34.5h438.784c19.058 0 34.5 15.442 34.5 34.5s-15.442 34.5-34.5 34.5z"
                      data-original="#000000"
                    />
                  </svg>
                </button>
              </div>
              }
            </h6>
            }
          </div>
        </div>

        <div class="ml-auto text-right">
          <div
            class="flex gap-2 items-center border border-gray-300 bg-white px-3 py-2 w-max"
          >
            @if(currentProduct.type==='simple'){

            <button type="button" class="border-none outline-none">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-2.5 h-2.5"
                viewBox="0 0 121.805 121.804"
              >
                <path
                  d="M7.308 68.211h107.188a7.309 7.309 0 0 0 7.309-7.31 7.308 7.308 0 0 0-7.309-7.309H7.308a7.31 7.31 0 0 0 0 14.619z"
                  data-original="#000000"
                />
              </svg>
            </button>

            <span class="text-gray-800 text-sm font-semibold px-3">{{
              currentProduct.properties[0].quantity
            }}</span>

            <button type="button" class="border-none outline-none">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-2.5 h-2.5"
                viewBox="0 0 512 512"
              >
                <path
                  d="M256 509.892c-19.058 0-34.5-15.442-34.5-34.5V36.608c0-19.058 15.442-34.5 34.5-34.5s34.5 15.442 34.5 34.5v438.784c0 19.058-15.442 34.5-34.5 34.5z"
                  data-original="#000000"
                />
                <path
                  d="M475.392 290.5H36.608c-19.058 0-34.5-15.442-34.5-34.5s15.442-34.5 34.5-34.5h438.784c19.058 0 34.5 15.442 34.5 34.5s-15.442 34.5-34.5 34.5z"
                  data-original="#000000"
                />
              </svg>
            </button>
            } @else { @for (products of currentProduct.properties; track $index)
            {

            <span class="text-gray-800 text-sm font-semibold px-8">{{
              products?.quantity
            }}</span>
            } }
          </div>

          <div class="mt-6">
            <h4 class="text-base font-bold text-gray-800">
              $ {{ currentProduct.price }}
            </h4>
          </div>
        </div>
      </div>
    </div>
    <div class="flex justify-end gap-2">
      <p-button
        label="Add to cart"
        severity="primary"
        class="bg-[#ffa500] text-white rounded-sm"
        (click)="addProductToNewCart()"
      />
    </div>
  </p-dialog>
</div>
